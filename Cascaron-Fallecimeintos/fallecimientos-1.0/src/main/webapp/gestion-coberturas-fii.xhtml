<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <h:head>
        <title>SIAS-Coberturas</title>
        <link rel = "stylesheet" href = "resources/css/baseUsuarioIH.css" />
        <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.0/css/all.css' integrity='sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ' crossorigin='anonymous'></link>
        <style>
            /*Agregamos estilo a la barra para importar*/
            .upload{
                position: absolute;
                max-width: 850px;
                top: 280px;
                left: 400px;
            }
            
            .ui-fileupload-buttonbar .ui-button-text-icon-left .ui-button-text {
                font-size: 0.9em;
            }

            .ui-fileupload-buttonbar.ui-widget-header {
                background-color: #70a3ca;
            }
            
        </style>
        
        <script type="text/javascript">
            function start(){
                renderDate();
                renderTime();
            }
        </script>
        
    </h:head>
        <img id="logo_fonacot" src="resources/css/fonacot.jpg" width="130" height="37"/>
        <img id="logo_sias_usuario" src="resources/css/logo.png" width="110" height="45"/>
        <img id="clock" src="resources/css/clock.png"/>
        <img id="logout" src="resources/css/logout.png"/>
        <img id="b_activo" src="resources/css/boton_activo.png"/>
        <img id="b_inactivo" src="resources/css/boton_inactivo.png"/>
    <h:body onload="start();">
        <div class="sistema_usuario">
            <p class="sias">Sistema Integral de Administración del Seguro de Crédito del FONACOT</p>
        </div>
        <div class="seccion">
            Gestión de Coberturas > Reclamos por fallecimiento, invalidez e incapacidad
        </div>
        <div class="link_cobertura">
            <a id="ref" href="gestion-coberturas.xhtml" >Gestión de Coberturas</a>
        </div>
        <div class="link_reclamo">
            <a id="ref" href="modulos.xhtml">Conciliar Reclamos</a>
        </div>
        
        <script type="text/javascript" src="resources/js/date.js"/>
        <script type="text/javascript" src="resources/js/time.js"/>
        
        <div id="dateDisplay" class="date"/>
        <div id="timeDisplay" class="time"/>
        
        <h:form>
            <p:commandButton value="Salir" 
                             action="#{cierraSesion.cierra()}" 
                             styleClass="button"/>
                <h:outputFormat value="#{iniciaSesion.getTipoUsuario()}" styleClass="usuario" />
        </h:form>
        
        <div id="administrador" class="menu">
            <h:form rendered="false">
                <p:growl id="messages" showDetail="false"/>
                <p:menu class="menuitem">
                    <p:submenu label="Gestión de Coberturas">
                        <p:menuitem value="Reclamo por desempleo" icon="ui-icon-radio-off"/>
                        <p:menuitem id="nada" value="Relamos por fallecimiento,&#10;invalidez e incapacidad" 
                                    style="white-space: pre;" icon="ui-icon-radio-off">
                                    <f:ajax execute = "nada" render = "sube_archivo" />
                            </p:menuitem>
                        <p:menuitem value="Reclamo de Atención a&#10;Clientes" style="white-space: pre;" 
                                    icon="ui-icon-radio-off"/>
                        <p:menuitem value="Integrar Reclamo" icon="ui-icon-radio-off"/>
                        <p:menuitem value="Enviar reclamo mensual" icon="ui-icon-radio-off"/>
                        <p:menuitem value="Reportes" icon="ui-icon-radio-off"/>
                    </p:submenu>
                </p:menu>
            </h:form>
        </div>
        
        <h:form id="sube_archivo">
            <p class="descripcion" ><i class='fas fa-angle-right'></i>  Cargar archivo (layout) para integrar
                reclamos por la cobertura de fallecimientos,<br/>   invalidez e incapacidad:
            </p>
        </h:form>
        
        <h:form enctype="multipart/form-data">
            <p:growl id="messages" showDetail="true" />
            <p:fileUpload value="#{uploadFile.file}" mode="advanced"
                          fileUploadListener="#{uploadFile.handleFileUpload}" 
                          dragDropSupport="true" fileLimit="1" allowTypes="/(\.|\/)(csv)$/" 
                          label="Examinar" cancelLabel="Cancelar" uploadLabel="Subir" 
                          fileLimitMessage="Ha excedido el límite de archivos (1)" 
                          invalidFileMessage="No se encontró el formato correcto (.csv) en:"
                          sizeLimit="500000" class="upload" update="exito"/>
        </h:form>
        
        <p:dialog widgetVar="io_error" showEffect="fade" resizable="true" modal="true">
             <h:form>
                <h:outputText value="Algo salió mal... Intente de nuevo."/>
                <br/>
                <br/>
                <div align="center">
                    <p:commandButton value="Continuar" action="gestion-coberturas-fii.xhmtl?faces-redirect=true"/>
                </div>
            </h:form>
        </p:dialog>
        
        <p:dialog id="exito" widgetVar="exitoso" showEffect="fade" closable="false" resizable="true" modal="true">
             <h:form>
                 <h:outputText value="#{uploadFile.getNumRegistros()}"/>
                <br/>
                <br/>
                <div align="center">
                    <p:commandButton value="Continuar" action="gestion-coberturas-fii_soporte.xhmtl?faces-redirect=true"/>
                </div>
            </h:form>
        </p:dialog>
        
        <p:dialog widgetVar="formato_incorrecto" showEffect="fade" closable="false" resizable="true" modal="true">
             <h:form>
                <h:outputText value="El formato del layout es incorrecto. &lt;br /&gt; 
                                     Por favor reviselo e intente de nuevo." escape="false"/>
                <br/>
                <br/>
                <div align="center"> 
                    <p:commandButton value="Continuar" action="gestion-coberturas-fii.xhmtl?faces-redirect=true"/>
                </div>
            </h:form>
        </p:dialog>
        
    </h:body>
</html>